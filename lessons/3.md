### Lesson 3 — Adding a Welcome Screen with a Global “Sound Options” Button

*(Works with Phaser 3 and the game code you’ve been expanding.)*

---

## 3.1 Create a **MainMenu** scene

> **Files to add**
> `scenes/MainMenu.js` (or inline in the same file if you prefer)

```js
class MainMenu extends Phaser.Scene {
  constructor() {
    super({ key: 'MainMenu' });
  }

  preload () {
    // simple background & button graphics
    this.load.image('titleBG', 'assets/ui/titleBG.png');
    this.load.image('btnStart', 'assets/ui/btnStart.png');
    this.load.image('btnOptions', 'assets/ui/btnOptions.png');

    // for the sound on/off icon in the options panel
    this.load.image('iconSoundOn',  'assets/ui/iconSoundOn.png');
    this.load.image('iconSoundOff', 'assets/ui/iconSoundOff.png');
  }

  create () {
    // 1) Background & title
    this.add.image(400, 300, 'titleBG').setOrigin(0.5);

    const titleText = this.add.text(400, 120, 'MY PHASER GAME', {
      fontSize: '48px',
      fill: '#ffffff'
    }).setOrigin(0.5);

    // 2) “Start Game” button
    const startBtn = this.add.image(400, 260, 'btnStart').setInteractive();
    startBtn.on('pointerup', () => {
      this.scene.start('Scene2');          // jump to your first level scene
    });

    // 3) “Options” button
    const optBtn = this.add.image(400, 340, 'btnOptions').setInteractive();
    optBtn.on('pointerup', () => {
      this.openOptionsPanel();
    });

    // 4) A simple fade-in
    this.cameras.main.fadeIn(700);
  }

  /* ---------- helper: mini options panel ---------- */
  openOptionsPanel () {
    // dark overlay
    const overlay = this.add.rectangle(400, 300, 800, 600, 0x000000, 0.6)
                             .setInteractive();  // block clicks behind it

    // panel background
    const panel = this.add.rectangle(400, 300, 300, 180, 0x333333, 0.9)
                           .setStrokeStyle(2, 0xffffff);

    const label = this.add.text(400, 250, 'Sound', {
      fontSize: '24px',
      color: '#ffffff'
    }).setOrigin(0.5);

    // sound toggle icon (reflects current global mute state)
    const iconKey = this.sound.mute ? 'iconSoundOff' : 'iconSoundOn';
    const soundBtn = this.add.image(400, 315, iconKey).setInteractive();

    soundBtn.on('pointerup', () => {
      // toggle Phaser’s global mute
      this.sound.mute = !this.sound.mute;
      // swap icon texture
      soundBtn.setTexture(this.sound.mute ? 'iconSoundOff' : 'iconSoundOn');
    });

    // close button
    const closeText = this.add.text(400, 375, 'CLOSE', {
      fontSize: '20px',
      backgroundColor: '#555',
      padding: { left: 10, right: 10, top: 5, bottom: 5 }
    }).setOrigin(0.5).setInteractive();

    closeText.on('pointerup', () => {
      overlay.destroy(); panel.destroy(); label.destroy();
      soundBtn.destroy(); closeText.destroy();
    });
  }
}
```

### What this does

| Code section                   | Purpose                                                                                                               |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------------- |
| **`preload()`**                | Loads art for the background, buttons, and sound icons.                                                               |
| **Buttons (`setInteractive`)** | Start → `Scene2` (or whatever your first gameplay scene is), Options → opens a modal panel.                           |
| **Options panel**              | Uses `this.sound.mute` (built-in) to toggle *all* game sounds. The same flag affects every other scene automatically. |
| **Overlay rectangles**         | Quick way to make a semi-transparent modal background without extra art.                                              |

---

## 3.2 Register the new scene & set it as the entry point

Where you configure Phaser:

```js
const config = {
  type: Phaser.AUTO,
  width: 800,
  height: 600,
  physics: { default: 'arcade', arcade: { gravity: { y: 400 } } },
  scene: [ MainMenu, Scene2, Scene3 ]   // MainMenu comes first
};

const game = new Phaser.Game(config);
```

> **Why this works** – When the browser loads, Phaser launches the first scene in the list (`MainMenu`). Clicking “Start Game” calls `this.scene.start('Scene2')`, unloading the menu and creating your gameplay world.

---

## 3.3 Access the global mute flag from any other scene

You **don’t** need extra code in Scene2/Scene3—`this.sound.mute` is shared:

```js
// Example: only play jump sound if not muted
if (!this.sound.mute) this.sfxJump.play();
```

But Phaser already skips `play()` silently when muted, so explicit checks are optional.

---

### Optional polish

| Idea                       | How                                                                                                         |
| -------------------------- | ----------------------------------------------------------------------------------------------------------- |
| **Keyboard input**         | In `MainMenu.create()`, add `this.input.keyboard.once('keydown-SPACE', () => this.scene.start('Scene2'));`. |
| **Volume slider**          | Replace the on/off icon with a draggable slider and update `this.sound.volume = value;`.                    |
| **Separate Options scene** | Instead of an overlay, create a small `Options` scene and start it with `this.scene.launch('Options')`.     |

---

## 3.4 Where to find free UI/button assets

You can make simple rectangles in code, but if you’d like prettier buttons:

* **Kenney.nl UI packs** – dozens of polished buttons under CC0.
* **OpenGameArt.org “UI” tag** – filter by license.
* **Itch.io → Assets → GUI** – many free or pay-what-you-want packs.

They pair nicely with the audio sources from the previous lesson.

---

### Recap

1. **Create `MainMenu` scene** with title, Start, and Options buttons.
2. **Toggle global audio** via `this.sound.mute` inside a tiny modal panel.
3. **List `MainMenu` first** in your Phaser config so it loads before any gameplay scene.

Drop the new scene file in your project, add its key to the scene list, and you have a professional-looking welcome screen plus an easy master sound toggle for the whole game!
